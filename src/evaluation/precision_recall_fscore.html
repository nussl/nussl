

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PrecisionRecallFScore Class &mdash; nussl 0.1.6a0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="BSSEvalBase Class" href="bss_eval_base.html" />
    <link rel="prev" title="EvaluationBase Class" href="evaluation_base.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> nussl
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/getting_started.html">Getting Started</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../core/core.html">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../separation/separation_classes.html">Separation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="evaluation_classes.html">Evaluation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="evaluation_base.html">EvaluationBase</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">PrecisionRecallFScore</a></li>
<li class="toctree-l2"><a class="reference internal" href="bss_eval_base.html">BSSEvalBase</a></li>
<li class="toctree-l2"><a class="reference internal" href="bss_eval_sources.html">BSSEvalSources</a></li>
<li class="toctree-l2"><a class="reference internal" href="bss_eval_images.html">BSSEvalImages</a></li>
<li class="toctree-l2"><a class="reference internal" href="bss_eval_v4.html">BSSEvalV4</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../transformers/transformer_classes.html">Transformers</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples/examples.html">Code Examples</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contribution Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">nussl</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="evaluation_classes.html">nussl Evaluation Classes</a> &raquo;</li>
        
      <li>PrecisionRecallFScore Class</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/src/evaluation/precision_recall_fscore.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-nussl.evaluation.precision_recall_fscore">
<span id="precisionrecallfscore-class"></span><h1>PrecisionRecallFScore Class<a class="headerlink" href="#module-nussl.evaluation.precision_recall_fscore" title="Permalink to this headline">¶</a></h1>
<p>This class provides common statistical metrics for determining how well a source separation algorithm in nussl was
able to create a binary mask compared to a known binary mask. The metrics used here are
<a class="reference external" href="https://en.wikipedia.org/wiki/Precision_and_recall">Precision, Recall</a>,
<a class="reference external" href="https://en.wikipedia.org/wiki/F1_score">F-Score</a> (sometimes called F-measure or F1-score), and Accuracy
(though this is not reflected in the name of the class, it is simply   <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">correct</span> <span class="pre">/</span> <span class="pre">total</span></code>).</p>
<p>Example:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Run Repet</span>
<span class="n">repet</span> <span class="o">=</span> <span class="n">nussl</span><span class="o">.</span><span class="n">Repet</span><span class="p">(</span><span class="n">mixture</span><span class="p">,</span> <span class="n">mask_type</span><span class="o">=</span><span class="n">nussl</span><span class="o">.</span><span class="n">BinaryMask</span><span class="p">)</span>  <span class="c1"># it&#39;s important to specify BinaryMask!</span>
<span class="n">repet_masks</span> <span class="o">=</span> <span class="n">repet</span><span class="p">()</span>

<span class="c1"># Get Ideal Binary Masks</span>
<span class="n">ideal_mask</span> <span class="o">=</span> <span class="n">nussl</span><span class="o">.</span><span class="n">IdealMask</span><span class="p">(</span><span class="n">mixture</span><span class="p">,</span> <span class="p">[</span><span class="n">drums</span><span class="p">,</span> <span class="n">flute</span><span class="p">],</span> <span class="n">mask_type</span><span class="o">=</span><span class="n">nussl</span><span class="o">.</span><span class="n">BinaryMask</span><span class="p">)</span>  <span class="c1"># BinaryMask here, too!</span>
<span class="n">ideal_masks</span> <span class="o">=</span> <span class="n">ideal_mask</span><span class="p">()</span>

<span class="c1"># Compare Repet to Ideal Binary Mask</span>
<span class="n">prf_repet</span> <span class="o">=</span> <span class="n">nussl</span><span class="o">.</span><span class="n">PrecisionRecallFScore</span><span class="p">(</span><span class="n">ideal_masks</span><span class="p">,</span> <span class="n">repet_masks</span><span class="p">)</span>
<span class="n">prf_repet_scores</span> <span class="o">=</span> <span class="n">prf_repet</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>Scores for each source are stored in a nested dictionary aptly named <code class="docutils literal notranslate"><span class="pre">scores</span></code>. This is a dictionary of dictionaries
where the key is the source label, and the value is another dictionary with scores for each of the metrics for that
source. So, for instance, the format of the <code class="docutils literal notranslate"><span class="pre">prf_repet_scores</span></code> dictionary from above is shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;Source 0&#39;</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Accuracy&#39;</span><span class="p">:</span> <span class="mf">0.83</span><span class="p">,</span>
               <span class="s1">&#39;Precision&#39;</span><span class="p">:</span> <span class="mf">0.78</span><span class="p">,</span>
               <span class="s1">&#39;Recall&#39;</span><span class="p">:</span> <span class="mf">0.81</span><span class="p">,</span>
               <span class="s1">&#39;F1-Score&#39;</span><span class="p">:</span> <span class="mf">0.77</span> <span class="p">},</span>
 <span class="s1">&#39;Source 1&#39;</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Accuracy&#39;</span><span class="p">:</span> <span class="mf">0.22</span><span class="p">,</span>
               <span class="s1">&#39;Precision&#39;</span><span class="p">:</span> <span class="mf">0.12</span><span class="p">,</span>
               <span class="s1">&#39;Recall&#39;</span><span class="p">:</span> <span class="mf">0.15</span><span class="p">,</span>
               <span class="s1">&#39;F1-Score&#39;</span><span class="p">:</span> <span class="mf">0.19</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PrecisionRecallFScore</span></code> can only be run using <a class="reference internal" href="../separation/mask_classes/binary_mask.html#binary-mask"><span class="std std-ref">BinaryMask</span></a> objects. The constructor expects a list of</li>
</ul>
<p><a class="reference internal" href="../separation/mask_classes/binary_mask.html#binary-mask"><span class="std std-ref">BinaryMask</span></a> objects for both the ground truth sources and the estimated sources.
* <code class="docutils literal notranslate"><span class="pre">PrecisionRecallFScore</span></code> does not calculate the correct permutation of the estimated and ground truth sources;
they are expected to be in the correct order when they are passed into <code class="docutils literal notranslate"><span class="pre">PrecisionRecallFScore</span></code>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="evaluation_base.html#evaluation-base"><span class="std std-ref">EvaluationBase Class</span></a> for more information about derived properties that this class has.</li>
<li><a class="reference internal" href="../separation/benchmarking/ideal_mask.html#ideal-mask"><span class="std std-ref">IdealMask</span></a> for information about how to get an array of ground truth binary masks.</li>
</ul>
</div>
<dl class="class">
<dt id="nussl.evaluation.precision_recall_fscore.PrecisionRecallFScore">
<em class="property">class </em><code class="descclassname">nussl.evaluation.precision_recall_fscore.</code><code class="descname">PrecisionRecallFScore</code><span class="sig-paren">(</span><em>true_sources_mask_list</em>, <em>estimated_sources_mask_list</em>, <em>source_labels=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nussl.evaluation.precision_recall_fscore.PrecisionRecallFScore" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="evaluation_base.html#nussl.evaluation.evaluation_base.EvaluationBase" title="nussl.evaluation.evaluation_base.EvaluationBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">nussl.evaluation.evaluation_base.EvaluationBase</span></code></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>true_sources_mask_list</strong> (<em>list</em>) – List of <a class="reference internal" href="../separation/mask_classes/binary_mask.html#binary-mask"><span class="std std-ref">BinaryMask</span></a> objects representing the ground truth sources.</li>
<li><strong>estimated_sources_mask_list</strong> (<em>list</em>) – List of <a class="reference internal" href="../separation/mask_classes/binary_mask.html#binary-mask"><span class="std std-ref">BinaryMask</span></a> objects representing the estimates from a source
separation object</li>
<li><strong>source_labels</strong> (<em>list</em><em>) </em><em>(</em><em>Optional</em>) – List of <code class="docutils literal notranslate"><span class="pre">str</span></code> with labels for each source. If no labels are provided, sources
will be labeled <code class="docutils literal notranslate"><span class="pre">Source</span> <span class="pre">0,</span> <span class="pre">Source</span> <span class="pre">1,</span> <span class="pre">...</span></code> etc.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="nussl.evaluation.precision_recall_fscore.PrecisionRecallFScore.scores">
<code class="descname">scores</code><a class="headerlink" href="#nussl.evaluation.precision_recall_fscore.PrecisionRecallFScore.scores" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary storing the precision, recall, F1-Score, and accuracy.
See <span class="xref std std-ref">nussl.PrecisionRecallFScore.evaluate</span> below.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">dict</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="nussl.evaluation.precision_recall_fscore.PrecisionRecallFScore.ACCURACY_KEY">
<code class="descname">ACCURACY_KEY</code><em class="property"> = 'Accuracy'</em><a class="headerlink" href="#nussl.evaluation.precision_recall_fscore.PrecisionRecallFScore.ACCURACY_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="nussl.evaluation.precision_recall_fscore.PrecisionRecallFScore.PRECISION_KEY">
<code class="descname">PRECISION_KEY</code><em class="property"> = 'Precision'</em><a class="headerlink" href="#nussl.evaluation.precision_recall_fscore.PrecisionRecallFScore.PRECISION_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="nussl.evaluation.precision_recall_fscore.PrecisionRecallFScore.RECALL_KEY">
<code class="descname">RECALL_KEY</code><em class="property"> = 'Recall'</em><a class="headerlink" href="#nussl.evaluation.precision_recall_fscore.PrecisionRecallFScore.RECALL_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="nussl.evaluation.precision_recall_fscore.PrecisionRecallFScore.FSCORE_KEY">
<code class="descname">FSCORE_KEY</code><em class="property"> = 'F1-Score'</em><a class="headerlink" href="#nussl.evaluation.precision_recall_fscore.PrecisionRecallFScore.FSCORE_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nussl.evaluation.precision_recall_fscore.PrecisionRecallFScore.evaluate">
<code class="descname">evaluate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nussl.evaluation.precision_recall_fscore.PrecisionRecallFScore.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines the precision, recall, f-score, and accuracy of each <a class="reference internal" href="../separation/mask_classes/binary_mask.html#binary-mask"><span class="std std-ref">BinaryMask</span></a> object in
<code class="docutils literal notranslate"><span class="pre">true_sources_mask_list</span></code> and <code class="docutils literal notranslate"><span class="pre">estimated_sources_mask_list</span></code>. Returns a dictionary of results that is
formatted like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;Source 0&#39;</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Accuracy&#39;</span><span class="p">:</span> <span class="mf">0.83</span><span class="p">,</span>
               <span class="s1">&#39;Precision&#39;</span><span class="p">:</span> <span class="mf">0.78</span><span class="p">,</span>
               <span class="s1">&#39;Recall&#39;</span><span class="p">:</span> <span class="mf">0.81</span><span class="p">,</span>
               <span class="s1">&#39;F1-Score&#39;</span><span class="p">:</span> <span class="mf">0.77</span> <span class="p">},</span>
 <span class="s1">&#39;Source 1&#39;</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Accuracy&#39;</span><span class="p">:</span> <span class="mf">0.22</span><span class="p">,</span>
               <span class="s1">&#39;Precision&#39;</span><span class="p">:</span> <span class="mf">0.12</span><span class="p">,</span>
               <span class="s1">&#39;Recall&#39;</span><span class="p">:</span> <span class="mf">0.15</span><span class="p">,</span>
               <span class="s1">&#39;F1-Score&#39;</span><span class="p">:</span> <span class="mf">0.19</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This dictionary is stored as e keys to this dictionary</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><em>self.scores (dict)</em> – A dictionary of scores that contains accuracy, precision, recall, and F1-score
of between the list of <a class="reference internal" href="../separation/mask_classes/binary_mask.html#binary-mask"><span class="std std-ref">BinaryMask</span></a> objects in both <code class="docutils literal notranslate"><span class="pre">true_sources_mask_list</span></code>
and <code class="docutils literal notranslate"><span class="pre">estimated_sources_mask_list</span></code>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">scores</code></dt>
<dd><p>A dictionary that stores all scores from the evaluation method. Gets populated when
<a class="reference internal" href="#nussl.evaluation.precision_recall_fscore.PrecisionRecallFScore.evaluate" title="nussl.evaluation.precision_recall_fscore.PrecisionRecallFScore.evaluate"><code class="xref py py-func docutils literal notranslate"><span class="pre">evaluate()</span></code></a> gets run.</p>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="bss_eval_base.html" class="btn btn-neutral float-right" title="BSSEvalBase Class" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="evaluation_base.html" class="btn btn-neutral" title="EvaluationBase Class" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Interactive Audio Lab.
      Last updated on Sep 24, 2018.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.1.6a0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>